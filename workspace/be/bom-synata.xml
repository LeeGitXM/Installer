<?xml version="1.0" encoding="UTF-8"?>
<!-- For any panel, the type determines the layout and class. The combination of 
      type and sub-type must be unique. If missing, the subtype is taken to be the
      same as the type. Within a panel, an artifact name/version combination must 
      be unique. 
 -->
<installer>
	<title>SynataBatchExpert+</title>
	<description>Installer for ILS Automation's Batch Expert+ for Synata</description>
	<property name="product">BatchExpert+</property>
	<property name="release">@RELEASE@</property>
	<property name="date">@DATE@</property>
	<property name="version">5</property>
	<!-- These entries define the install panels and their order -->
	<!-- The welcome panel must always be displayed, thus no version -->
	<panel type="welcome" essential="true">
		<title>ILS Automation Installer for Batch Expert+ </title>
		<preamble>This is a special version of the ILS Automation installer for Batch Expert+ built for
		the express purpose of updating the existing Synata installation to Batch Expert+ 2.0. This installation 
		expects a tag provider named &quot;default&quot; and a SQL Server database source named BEDB.
		</preamble>
		<artifact name="notes" type="pdf">
			<location>artifacts/doc/ReleaseNotes.pdf</location>
		</artifact>
	</panel>
	<panel type="license" essential="true" version="1">
		<title>End User License Agreement (EULA)</title>
		<preamble>Click on the button below to view the license that specifies
			permissible use of the software to be installed. Select the checkbox
			to indicate acceptance of the terms.
			You must accept the license terms to proceed.
		</preamble>
		<artifact name="license" type="html">
			<location>artifacts/license/license.html</location>
		</artifact>
	</panel>
	<!-- Python types are copied into the Ignition user-lib/pylib area.
	     Jar types are copied into lib -->
	<panel type="file" essential="true" version="1">
		<title>Python Extensions for Batch Expert+</title>
		<preamble>This page loads the custom Python modules that support Batch Expert+. 
		</preamble>
		<artifact name="External Python for Batch Expert+" type="directory" subtype="user-lib">
			<location>artifacts/external/ils</location>
			<destination>pylib/ils</destination>
		</artifact>
		<artifact name="ILS jar files for Batch Expert+" type="directory" subtype="lib">
			<location>artifacts/external/lib</location>
			<destination>core/common</destination>
		</artifact>
		<artifact name="Custom SFC Steps for Batch Expert+" type="directory" subtype="user-lib">
			<location>artifacts/external/pysfc</location>
			<destination>pylib/ils/pysfc</destination>
		</artifact>
		<artifact name="XLSXWriter" type="directory" subtype="user-lib">
			<location>artifacts/external/xlsxwriter</location>
			<destination>pylib/xlsxwriter</destination>
		</artifact>
	</panel>
	<panel type="tag" subtype="production" essential="true" version="1">
		<title>Install Tags and UDT Definitions</title>
		<preamble>This page defines UDTs and tags for common BatchExpert controllers and
					system configuration. These definitions are written to the default tag provider.
		</preamble>
		<property name="provider">default</property>
		<artifact name="UDT Definitions" type="tag" subtype="xml">
			<location>artifacts/tags/udts.xml</location>
		</artifact>
		<artifact name="Tag Instances" type="tag" subtype="xml">
			<location>artifacts/tags/sqlTags.xml</location>
		</artifact>
	</panel>
	<panel type="definition" essential="true">
		<title>Define tags provider and database connections</title>
		<preamble>Specify the database connection and DBMS-type that 
		          become the project defaults. Select &quot;default&quot; for the
		          tag provider.
		</preamble>
		<property name="database" type="production">
			<script>ils.be.configuration.config.setDatasource</script>
		</property>
		<property name="DBMS" type="production">
			<script>ils.be.configuration.config.setDBMS</script>
		</property>
		<property name="provider" type="production"></property>
	</panel>
		<panel type="feature" essential="true">
		<title>Batch-Expert Feature Selection</title>
		<preamble>Configure your Batch-Expert+ installation to include the SFC feature.
		</preamble>
		<!-- destination defines python to execute on feature installation -->
		<artifact name="SFC">
			<comment>Enable Sequential Functional Charts (SFCs) within Batch-Expert. Use of this 
		         feature requires the Ignition SFC module.</comment>
			<script>ils.be.configuration.install.useSFC</script>
		</artifact>
	</panel>
	<panel type="database" essential="true" version="1">
		<title>Database Clear, Create and Alter Scripts for Batch Expert+</title>
		<preamble>This page provides the opportunity for populating the BEDB SQL Server database instance.
		          As a safety measure, the database creation step will fail unless any previous instance is cleared.
		</preamble>
		<property name="database">BEDB</property>
		<!-- Recognized subtypes are: clear, create, alter -->
		<artifact name="Drop Tables" type="sql" subtype="clear">
			<location>artifacts/database/clearTables.sql</location>
			<script>ils.be.configuration.install.clearDatabase</script>
		</artifact>
		<artifact name="Create Tables" type="sql" subtype="create">
			<location>artifacts/database/createTables.sql</location>
			<script>ils.be.configuration.install.createDatabase</script>
		</artifact>
	</panel>
		<panel type="module" subtype="production" essential="true" version="1" >
		<title>Install Custom Modules</title>
		<preamble>This step installs the ILS custom modules necessary for BatchExpert+.
		</preamble>
		<artifact name="Python SFC" type="module">
			<location>artifacts/modules/pysfc-module-signed.modl</location>
		</artifact>
		<artifact name="Rangeslider Component" type="module">
			<location>artifacts/modules/rangeslider-module-signed.modl</location>
		</artifact>
	</panel>
		<panel type="project" subtype="main" essential="true" version="1">
		<title>Install a New BE Project or Merge Changes into an Existing
			Project
		</title>
		<preamble>BatchExpert is the main Ignition project. This page provides
			artifacts for a clean, new installation or,
			alternatively, a merge with an existing version. A merge preserves any user
			modifications.
		</preamble>
		<!-- For projects, artifact subtypes are: full, partial and global -->
		<artifact name="BatchExpert" type="project" subtype="full">
			<location>artifacts/projects/BatchExpert.proj</location>
		</artifact>
	</panel>
	<panel type="project" subtype="sfc" essential="true" version="1">
		<title>Install SFC Charts in the Global Project
		</title>
		<preamble>This page handles installation of charts for sequential control of batch operations.
			The charts are packaged as Ignition global projects. They completely replace
			any existing charts of the same name. Multiple chart hierarchies can be updated
			from this one page. 
		</preamble>
		<artifact name="BatchExpert SFC" type="project" subtype="global">
			<location>artifacts/projects/BatchExpertSFC.proj</location>
		</artifact>
	</panel>
	<!-- The summary panel must always be displayed, thus no version -->
	<panel type="summary" essential="true">
		<title>Installation Summary</title>
		<preamble>The list below shows which of the installation steps have been completed.
		 Selecting "Finish" will record the current version of BatchExpert+ in
			the Gateway internal database.
		</preamble>
	</panel>
	<!-- The completion page is displayed on finish. Use it to display post-install instructions. -->
	<epilog>
		<title>Installation Complete</title>
		<preamble>The automated installation and configuration of Batch Expert+
		          is complete. There are just a few more manual steps required. </preamble>
		<note name="Disabled Projects">Newly created projects are installed disabled. They must be enabled before use.</note>
		<note name="Gateway Restart">Several modules with active components have been installed. A Gateway restart is required.</note>
	</epilog>
</installer>

