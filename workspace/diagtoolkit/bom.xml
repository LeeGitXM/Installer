<?xml version="1.0" encoding="UTF-8"?>
<!-- For any panel, the type determines the layout and class. The combination of 
      type and sub-type must be unique. If missing, the subtype is taken to be the
      same as the type. Within a panel, an artifact name/version combination must 
      be unique. 
 -->
<installer>
	<title>Dignostic Toolkit Testing</title>
	<description>Installer of a test environment for hte EMC Diagnostics Toolkit</description>
	<property name="product">Diagnostic Toolkit - test</property>
	<property name="release">@RELEASE@</property>
	<property name="date">@DATE@</property>
	<property name="version">3</property>
	<!-- These entries define the install panels and their order -->
	<!-- The welcome panel must always be displayed, thus no version -->
	<panel type="welcome" essential="true">
		<title>ILS Automation Installer for testing the EMC Diagnostic Toolkit</title>
		<preamble>Welcome to the ILS Automation installer setup of the test environment
			of the ExxonMobil Chemicals Diagnostic Toolkit. This installer is designed to be
			applied to a production installation. It merely adds test instrumentation for 
			the Diagnostic Toolkit. The table below compares the existing installation of
			this product, if any, with the versions contained in this new
			installation. Before continuing, please make sure that you have 
			defined tag providers and database connections for both production and 
			isolation (test) environments.
		</preamble>
	</panel>
	<panel type="clear" essential="false">
		<title>Clear obsolete files</title>
		<preamble>This step removes obsolete files installed during one
		          or more previous installations.
		</preamble>
		<!-- subtypes are: lib, user-lib, filesystem -->
		<artifact name="Incorrect external jar" type="file" subtype="lib">
			<location>core/common/ils-common.gz</location>
		</artifact>
		<artifact name="Obsolete python module" type="directory" subtype="user-lib">
			<location>pylib/xom</location>
		</artifact>
		<artifact name="Unused test files" type="directory" subtype="filesystem">
			<location>test/regression</location>
		</artifact>
	</panel>
	<panel type="definition" essential="true">
		<title>Interface Definitions</title>
		<preamble>Specify tag provider and database connections as used by the Ignition Applications. 
		This product requires that both production and test mode versions are specified. 
		The selections hare are used by subsequent screens.
		</preamble>
		<!--  Allowed names are: database, provider -->
		<!--  Allowed types are: production, isolation -->
		<property name="database" type="production"></property>
		<property name="database" type="isolation"></property>
		<property name="provider" type="production"></property>
		<property name="provider" type="isolation"></property>
	</panel>
	<!-- Python types are copied into the Ignition user-lib/pylib area.
	     Jar types are copied into lib -->
	<panel type="file" essential="true" version="1">
		<title>Python Code for the ACE Application</title>
		<preamble>This page loads Python code that supports the ACE Application. 
		The Python is divided into two categories: code developed by ILS Automation that is 
		generic and used in multiple products, and code modified specifically for
		this application.
		A third category consists of Java jar files that are referenced by the Python.
		</preamble>
		<artifact name="External Python - ILS" type="directory" subtype="user-lib">
			<location>artifacts/external/ils-python</location>
			<destination>pylib</destination>
		</artifact>
		<artifact name="External Python - ACE" type="directory" subtype="user-lib">
			<location>artifacts/external/xom-python</location>
			<destination>pylib</destination>
		</artifact>
		<artifact name="Jar Files to Support External Python" type="directory" subtype="lib">
			<location>artifacts/external/jars</location>
			<destination>core</destination>
		</artifact>
	</panel>
	<panel type="tag" subtype="production" essential="true" version="1">
		<title>Install Tags and UDT Definitions</title>
		<preamble>This page defines UDTs and tags that are needed by the applications
			when running in &lt;b&gt;PRODUCTION&lt;/b&gt; mode.
		</preamble>
		<property name="provider" type="production"></property>
		<artifact name="UDT Definitions" type="tag" subtype="xml">
			<location>artifacts/tags/UDTs.xml</location>
		</artifact>
		<artifact name="Tags Representing Connections" type="tag"
			subtype="xml">
			<location>artifacts/tags/connections.xml</location>
		</artifact>
		<artifact name="Production Tags" type="tag" subtype="xml">
			<location>artifacts/tags/sqlTags.xml</location>
		</artifact>
		<artifact name="Vistalon Site Tags" type="tag" subtype="xml">
			<location>artifacts/tags/siteTags.xml</location>
		</artifact>
	</panel>
	<panel type="tag" subtype="test" essential="False" version="1">
		<title>Install Tags Definitions for Test</title>
		<preamble>This page defines tags that are used by the Ignition Applications
		when running in &lt;b&gt;ISOLATION&lt;/b&gt; mode.
		</preamble>
		<property name="provider" type="isolation"></property>
		<artifact name="Test Tags" type="tag" subtype="xml">
			<location>artifacts/tags/testTags.xml</location>
		</artifact>
	</panel>

	
	
	<panel type="file" essential="false">
		<title>Install test files</title>
		<preamble>This step adds test scripts to the filesystem.
		           
		</preamble>
		<!-- paths are with respect to the file system root -->
		<artifact name="Test python scripts" type="directory" >
			<location>regression/pylib</location>
		</artifact>
		<artifact name="Test framework scripts" type="directory" subtype="user-lib">
			<location>regression/basic</location>
		</artifact>
	</panel>
	<panel type="toolkit" essential="true" version="1">
		<title>Update Toolkit Properties</title>
		<preamble>Set properties in the internal database of the Gateway.
			These particular parameters define extension functions that update
			the database in response to operator operations on diagrams.
		</preamble>
		<property name="com.ils.application(property-get-script)">xom.extensions.appProperties.getAux</property>
		<property name="com.ils.application(property-rename-script)">xom.extensions.appProperties.rename</property>
		<property name="com.ils.application(property-set-script)">xom.extensions.appProperties.setAux</property>
		<property name="com.ils.family(property-get-script)">xom.extensions.famProperties.getAux</property>
		<property name="com.ils.family(property-rename-script)">xom.extensions.famProperties.rename</property>
		<property name="com.ils.family(property-set-script)">xom.extensions.famProperties.setAux</property>
		<property name="com.ils.diagram(node-create-script)">xom.extensions.diaCreation.create</property>
		<property
			name="xom.block.finaldiagnosis.FinalDiagnosis(property-get-script)">xom.extensions.fdProperties.getAux</property>
		<property
			name="xom.block.finaldiagnosis.FinalDiagnosis(property-rename-script)">xom.extensions.fdProperties.rename</property>
		<property
			name="xom.block.finaldiagnosis.FinalDiagnosis(property-set-script)">xom.extensions.fdProperties.setAux</property>
	</panel>
	<!-- The summary panel must always be displayed, thus no version -->
	<panel type="summary" essential="true">
		<title>Installation Summary</title>
		<preamble>The list below shows which of the installation steps have been completed.
		 Selecting "Finish" will record the current version of ACE Ignition Applications in
			the Gateway internal database.
		</preamble>
	</panel>
	<!-- The completion page is displayed on finish. Use it to display post-install instructions. -->
	<epilog>
		<title>Installation Complete</title>
		<preamble>The automated installation and configuration of the ACE Control Ignition Application
		          is complete. There are just a few more manual steps required. </preamble>
		<note name="Disabled Projects">Newly created projects are installed disabled. They must be enabled before use.</note>
		<note name="Gateway Restart">Several modules with active components have been installed. A Gateway restart is required.</note>
	</epilog>
</installer>

